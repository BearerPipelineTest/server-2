/*! For license information please see profiler-profilerToolbar.js.LICENSE.txt */
!function(){"use strict";var e,n={97866:function(e,n,o){var r=o(20144),i=o(16453),a=o(20629),l=o(79753);function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i=[],a=!0,l=!1;try{for(n=n.call(t);!(a=(o=n.next()).done)&&(i.push(o.value),!e||i.length!==e);a=!0);}catch(t){l=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(l)throw r}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=(0,i.loadState)("profiler","request-token"),p={name:"ProfilerToolbar",data:function(){return{token:f}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({profile:function(){return this.profiles[this.token]},queriesNumber:function(){return Object.values(this.profile.collectors.db.queries).length},queriesTime:function(){return(1e3*Object.values(this.profile.collectors.db.queries).reduce((function(t,e){return e.executionMS+t}),0)).toFixed(1)},ldapQueryTime:function(){return(1e3*Object.values(this.profile.collectors.ldap).reduce((function(t,e){return e.end-e.start+t}),0)).toFixed(1)},cacheTotal:function(){var t=0;return Object.entries(this.profile.collectors).forEach((function(e){var n=c(e,2),o=n[0],r=n[1];o.includes("cache")&&(t+=r.cacheMiss+r.cacheHit)})),t},cacheHits:function(){var t=0;return Object.entries(this.profile.collectors).forEach((function(e){var n=c(e,2),o=n[0],r=n[1];o.includes("cache")&&(t+=r.cacheHit)})),t},cacheTime:function(){var t=0;return Object.entries(this.profile.collectors).forEach((function(e){var n=c(e,2),o=n[0],r=n[1];o.includes("cache")&&(t+=r.queries.reduce((function(t,e){return e.end-e.start+t}),0))})),(1e3*t).toFixed(1)},background:function(){return this.profile?200===this.profile.statusCode?"status-success":500===this.profile.statusCode?"status-error":"status-warning":""},time:function(){return this.profile?new Date(1e3*this.profile.time).toUTCString():""}},(0,a.rn)(["profiles","stackElements"])),mounted:function(){this.$store.dispatch("loadProfile",{token:f})},methods:{displayDuration:function(t){return(1e3*t).toFixed(2)},generateAjaxUrl:function(t){return(0,l.generateUrl)("/apps/profiler/profiler/db/{token}",{token:t.profile})},openProfiler:function(t){document.location=(0,l.generateUrl)("/apps/profiler/profiler/{view}/{token}",{view:t,token:this.token})}}},A=p,b=o(93379),v=o.n(b),h=o(32626),C=(v()(h.Z,{insert:"head",singleton:!1}),h.Z.locals,(0,o(51900).Z)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"profiler-toolbar"}},[t.profile?n("footer",{staticClass:"bottom-bar"},[n("div",{staticClass:"toolbar-block",attrs:{role:"button"},on:{click:function(e){return t.openProfiler("router")}}},[n("div",{staticClass:"text-v-center px-3",class:t.background},[t._v("\n\t\t\t\t"+t._s(t.profile.statusCode)+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"text-v-center px-3"},[t._v("\n\t\t\t\t"+t._s(t.profile.collectors.router.controllerName)+"::"+t._s(t.profile.collectors.router.actionName)+"\n\t\t\t")]),t._v(" "),n("div",{staticClass:"info"},[n("div",[n("b",[t._v("HTTP Status:")]),t._v(" "+t._s(t.profile.statusCode)+" ")]),t._v(" "),n("div",[n("b",[t._v("Controller:")]),t._v(" "+t._s(t.profile.collectors.router.appName)+"/"+t._s(t.profile.collectors.router.controllerName)+"::"+t._s(t.profile.collectors.router.actionName)+" ")]),t._v(" "),n("div",[n("b",[t._v("Profiled on:")]),t._v(" "+t._s(t.time)+" ")]),t._v(" "),n("div",[n("b",[t._v("Token:")]),t._v(" "+t._s(t.profile.token))])])]),t._v(" "),n("div",{staticClass:"toolbar-block text-v-center px-3",attrs:{role:"button"},on:{click:function(e){return t.openProfiler("event")}}},[t._v("\n\t\t\t"+t._s(t.displayDuration(t.profile.collectors.event.runtime.duration+t.profile.collectors.event.autoloader.duration))+" ms\n\t\t\t"),n("div",{staticClass:"info",staticStyle:{width:"225px"}},[n("div",[n("b",[t._v("Total time:")]),t._v(" "+t._s(t.displayDuration(t.profile.collectors.event.runtime.duration+t.profile.collectors.event.autoloader.duration))+" ms")]),t._v(" "),n("div",[n("b",[t._v("Boot:")]),t._v(" "+t._s(t.displayDuration(t.profile.collectors.event.boot.duration))+" ms")]),t._v(" "),t.profile.collectors.event.run_route?n("div",[n("b",[t._v("Run route:")]),t._v(" "+t._s(t.displayDuration(t.profile.collectors.event.run_route.duration))+" ms\n\t\t\t\t")]):t._e(),t._v(" "),t.profile.collectors.event.setup_fs?n("div",[n("b",[t._v("Setup filesystem:")]),t._v(" "+t._s(t.displayDuration(t.profile.collectors.event.setup_fs.duration))+" ms\n\t\t\t\t")]):t._e()])]),t._v(" "),n("div",{staticClass:"toolbar-block text-v-center px-3",attrs:{role:"button"},on:{click:function(e){return t.openProfiler("db")}}},[t._v("\n\t\t\t"+t._s(t.queriesNumber)+" in "+t._s(t.queriesTime)+" ms\n\t\t\t"),n("div",{staticClass:"info",staticStyle:{width:"225px"}},[n("div",[n("b",[t._v("Number of queries:")]),t._v(" "+t._s(t.queriesNumber))]),t._v(" "),n("div",[n("b",[t._v("Query time:")]),t._v(" "+t._s(t.queriesTime)+" ms")])])]),t._v(" "),t.profile.collectors.ldap?n("div",{staticClass:"toolbar-block text-v-center px-3",attrs:{role:"button"},on:{click:function(e){return t.openProfiler("ldap")}}},[t._v("\n\t\t\t"+t._s(t.profile.collectors.ldap.length)+" LDAP request\n\t\t\t"),t.profile.collectors.ldap.length>0?n("div",{staticClass:"info",staticStyle:{width:"500px","max-height":"600px","overflow-x":"scroll"}},[n("div",[n("b",[t._v("Number of queries:")]),t._v(" "+t._s(t.profile.collectors.ldap.length))]),t._v(" "),n("div",[n("b",[t._v("Query time:")]),t._v(" "+t._s(t.ldapQueryTime)+" ms")])]):t._e()]):t._e(),t._v(" "),t.cacheTotal>0?n("div",{staticClass:"toolbar-block text-v-center px-3",attrs:{role:"button"},on:{click:function(e){return t.openProfiler("cache")}}},[t._v("\n\t\t\t"+t._s(t.cacheHits)+" / "+t._s(t.cacheTotal)+" cache hits\n\t\t\t"),n("div",{staticClass:"info",staticStyle:{width:"200px","max-height":"600px","overflow-x":"scroll"}},[n("div",[n("b",[t._v("Cache hits:")]),t._v(" "+t._s(t.cacheHits)+" / "+t._s(t.cacheTotal))]),t._v(" "),n("div",[t._v("In "+t._s(t.cacheTime)+" ms")])])]):t._e(),t._v(" "),n("div",{staticClass:"toolbar-block text-v-center px-3",attrs:{role:"button"},on:{click:function(e){return t.openProfiler("db")}}},[t._v("\n\t\t\t"+t._s(t.stackElements.length)+" AJAX requests\n\t\t\t"),n("div",{staticClass:"info",staticStyle:{width:"500px","max-height":"600px","overflow-x":"scroll"}},t._l(t.stackElements,(function(e,o){return n("div",{key:o},[n("a",{attrs:{href:t.generateAjaxUrl(e)}},[t._v("\n\t\t\t\t\t\t"+t._s(e.url)+"\n\t\t\t\t\t\tin "+t._s(e.duration.toFixed())+" ms\n\t\t\t\t\t\t"),n("span",{staticClass:"lighter"},[t._v("("+t._s(e.profile)+")")])])])})),0)])]):t._e()])}),[],!1,null,"7f5dddec",null).exports),m=o(4820);r.default.use(a.ZP);var g=new a.yh({state:{profiles:{},stackElements:[]},mutations:{addProfile:function(t,e){var n=e.token,o=e.profile;r.default.set(t.profiles,n,o)},addStackElement:function(t,e){t.stackElements.push(e)}},getters:{profile:function(t){return function(e){return t.profiles[e]}}},actions:{loadProfile:function(t,e){var n=t.commit,o=t.state,r=e.token;o.profiles[r]||m.default.get((0,l.generateUrl)("/apps/profiler/profile/{token}",{token:r})).then((function(t){n("addProfile",{token:r,profile:t.data.profile})}))}}});if(r.default.prototype.OC=OC,r.default.prototype.t=t,r.default.use(a.ZP),new r.default({el:"#profiler-toolbar",store:g,render:function(t){return t(C)}}),window.fetch&&void 0===window.fetch.polyfill){var x=window.fetch;window.fetch=function(){console.debug("fetch");var t=x.apply(this,arguments),e=arguments[0],n=arguments[1],o=Object.prototype.toString.call(arguments[0]);if("[object Request]"===o?(e=arguments[0].url,n={method:arguments[0].method,credentials:arguments[0].credentials,headers:arguments[0].headers,mode:arguments[0].mode,redirect:arguments[0].redirect}):e=String(e),!e.match(/profiler/)){var r="GET";n&&void 0!==n.method&&(r=n.method);var i={error:!1,url:e,method:r,type:"fetch",start:new Date};t.then((function(t){i.duration=new Date-i.start,i.error=t.status<200||t.status>=400,i.statusCode=t.status,i.profile=t.headers.get("x-debug-token"),i.profilerUrl=t.headers.get("x-debug-token-link"),g.commit("addStackElement",i)}),(function(t){g.commit("addStackElement",i)}))}return t}}var _=function(t,e){var n,o=t.getAllResponseHeaders();(n=o.match(/^x-debug-token:\s+(.*)$/im))&&(e.profile=n[1]),(n=o.match(/^x-debug-token-link:\s+(.*)$/im))&&(e.profilerUrl=n[1]),(n=o.match(/^Symfony-Debug-Toolbar-Replace:\s+(.*)$/im))&&(e.toolbarReplaceFinished=!1,e.toolbarReplace="1"===n[1])};if(window.XMLHttpRequest&&XMLHttpRequest.prototype.addEventListener){var y=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(t,e,n,o,r){var i=this,a=e;if("/"===e.substr(0,1)?0===e.indexOf("/index.php/")&&(a=e.substr("/index.php")):0===e.indexOf("".concat(location.protocol,"//").concat(location.hostname,"/").length)&&(a=e.substr("".concat(location.protocol,"//").concat(location.hostname,"/"))),!a.match(/profiler/)){var l={error:!1,url:e,method:t,type:"xhr",start:new Date};this.addEventListener("readystatechange",(function(){4===i.readyState&&(l.duration=new Date-l.start,l.error=i.status<200||i.status>=400,l.statusCode=i.status,_(i,l),g.commit("addStackElement",l))}),!1)}y.apply(this,Array.prototype.slice.call(arguments))}}},32626:function(t,e,n){var o=n(94015),r=n.n(o),i=n(23645),a=n.n(i)()(r());a.push([t.id,".bottom-bar[data-v-7f5dddec]{position:fixed;width:100%;bottom:0;left:0;display:flex;z-index:10;flex-direction:row;background-color:#222;justify-content:start;height:36px;font-size:12px;border-bottom:1px solid var(--color-border);z-index:99999}.bottom-bar>.toolbar-block[data-v-7f5dddec]{height:100%}.bottom-bar>.toolbar-block[data-v-7f5dddec],.bottom-bar>.toolbar-block>.text-v-center[data-v-7f5dddec]{cursor:pointer}.bottom-bar .pr-3[data-v-7f5dddec],.bottom-bar .px-3[data-v-7f5dddec]{padding-right:1rem !important}.bottom-bar .pl-3[data-v-7f5dddec],.bottom-bar .px-3[data-v-7f5dddec]{padding-left:1rem !important}.bottom-bar .lighter[data-v-7f5dddec]{color:#ddd}.bottom-bar .text-v-center[data-v-7f5dddec]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center}.bottom-bar .toolbar-block[data-v-7f5dddec]:hover{position:relative;background-color:#444;border-radius:0}.bottom-bar .toolbar-block:hover .info[data-v-7f5dddec]{display:block;padding:10px;max-width:480px;max-height:480px;word-wrap:break-word;overflow:hidden}.bottom-bar .toolbar-block[data-v-7f5dddec]{display:flex;flex-direction:row;justify-content:center;color:#fff}.bottom-bar .toolbar-block .info[data-v-7f5dddec]{background-color:#444;bottom:36px;color:#f5f5f5;display:none;padding:.5rem;position:absolute}.bottom-bar .toolbar-block .info a[data-v-7f5dddec]{color:#f5f5f5}.status-success[data-v-7f5dddec]{background-color:rgba(112,196,137,.75)}.status-error[data-v-7f5dddec]{background-color:rgba(231,55,51,.65)}.status-warning[data-v-7f5dddec]{background-color:rgba(213,118,41,.75)}.url[data-v-7f5dddec]{margin-left:48px}","",{version:3,sources:["webpack://./apps/profiler/src/ProfilerToolbar.vue"],names:[],mappings:"AAiLA,6BACC,cAAA,CACA,UAAA,CACA,QAAA,CACA,MAAA,CACA,YAAA,CACA,UAAA,CACA,kBAAA,CACA,qBAAA,CACA,qBAAA,CACA,WAAA,CACA,cAAA,CACA,2CAAA,CACA,aAAA,CAEA,4CACC,WAAA,CACA,uGACC,cAAA,CAIF,sEACC,6BAAA,CAGD,sEACC,4BAAA,CAGD,sCACC,UAAA,CAGD,4CACC,WAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CAGD,kDACC,iBAAA,CACA,qBAAA,CACA,eAAA,CACA,wDACC,aAAA,CACA,YAAA,CACA,eAAA,CACA,gBAAA,CACA,oBAAA,CACA,eAAA,CAIF,4CACC,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,UAAA,CACA,kDACC,qBAAA,CACA,WAAA,CACA,aAAA,CACA,YAAA,CACA,aAAA,CACA,iBAAA,CAEA,oDACC,aAAA,CAKJ,iCACC,sCAAA,CAED,+BACC,oCAAA,CAED,iCACC,qCAAA,CAED,sBACC,gBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.bottom-bar {\n\tposition: fixed;\n\twidth: 100%;\n\tbottom: 0;\n\tleft: 0;\n\tdisplay: flex;\n\tz-index: 10;\n\tflex-direction: row;\n\tbackground-color: #222;\n\tjustify-content: start;\n\theight: 36px;\n\tfont-size: 12px;\n\tborder-bottom: 1px solid var(--color-border);\n\tz-index: 99999;\n\n\t& > .toolbar-block {\n\t\theight: 100%;\n\t\t&, & > .text-v-center {\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\n\t.pr-3, .px-3 {\n\t\tpadding-right: 1rem !important;\n\t}\n\n\t.pl-3, .px-3 {\n\t\tpadding-left: 1rem !important;\n\t}\n\n\t.lighter {\n\t\tcolor: #ddd;\n\t}\n\n\t.text-v-center {\n\t\theight: 100%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\n\t.toolbar-block:hover {\n\t\tposition: relative;\n\t\tbackground-color: #444;\n\t\tborder-radius: 0;\n\t\t.info {\n\t\t\tdisplay: block;\n\t\t\tpadding: 10px;\n\t\t\tmax-width: 480px;\n\t\t\tmax-height: 480px;\n\t\t\tword-wrap: break-word;\n\t\t\toverflow: hidden;\n\t\t}\n\t}\n\n\t.toolbar-block {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tjustify-content: center;\n\t\tcolor: white;\n\t\t.info {\n\t\t\tbackground-color: #444;\n\t\t\tbottom: 36px;\n\t\t\tcolor: #F5F5F5;\n\t\t\tdisplay: none;\n\t\t\tpadding: .5rem;\n\t\t\tposition: absolute;\n\n\t\t\ta {\n\t\t\t\tcolor: #F5F5F5;\n\t\t\t}\n\t\t}\n\t}\n}\n.status-success {\n\tbackground-color: rgba(112, 196, 137, 0.75);\n}\n.status-error {\n\tbackground-color: rgba(231, 55, 51, 0.65);\n}\n.status-warning {\n\tbackground-color: rgba(213, 118, 41, 0.75);\n}\n.url {\n\tmargin-left: 48px;\n}\n"],sourceRoot:""}]),e.Z=a}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={id:t,loaded:!1,exports:{}};return n[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=n,r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},e=[],r.O=function(t,n,o,i){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],i=e[d][2];for(var l=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((function(t){return r.O[t](n[c])}))?n.splice(c--,1):(l=!1,i<a&&(a=i));if(l){e.splice(d--,1);var s=o();void 0!==s&&(t=s)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,o,i]},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},r.j=785,function(){var t={785:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,a=n[0],l=n[1],c=n[2],s=0;if(a.some((function(e){return 0!==t[e]}))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(c)var d=c(r)}for(e&&e(n);s<a.length;s++)i=a[s],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(d)},n=self.webpackChunknextcloud=self.webpackChunknextcloud||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var i=r.O(void 0,[874],(function(){return r(97866)}));i=r.O(i)}();
//# sourceMappingURL=profiler-profilerToolbar.js.map?v=615c831023e0b90771e4